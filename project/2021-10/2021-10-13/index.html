<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’•ğŸ’•ğŸ’•</title>
</head>
<style>
    body {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
    }
    
    .main-content {
        position: relative;
        width: 500px;
    }
    
    .main-info {
        position: absolute;
        width: 500px;
    }
    
    .img-bg {
        position: absolute;
        left: 0px;
        top: 0px;
        width: 500px;
    }
    
    .response-img {
        position: absolute;
        left: 0px;
        top: 230px;
        width: 500px;
    }
    
    .content {
        position: absolute;
        left: 30px;
        top: 440px;
        color: #fff;
        font-size: .8rem;
        line-height: 1.5rem;
    }
    
    .content .tips {
        display: none;
    }
    
    .media-wrap {
        overflow: hidden;
        position: fixed;
        top: 1rem;
        right: .5rem;
        z-index: 10000;
        width: 4rem;
        height: 3.5rem;
        font-size: 1.6rem;
    }
    
    .media-wrap #musicBtnTxt {
        float: right;
        height: 3rem;
        width: 2rem;
        line-height: 3rem;
        text-align: center;
        color: #fff;
        font-size: 2rem;
    }
    
    .media-wrap .music-btn {
        float: left;
        width: 1.5rem;
        height: 1.5rem;
        background: url('img/music-icon.png');
        background-size: cover;
    }
    
    .musicOn {
        -webkit-animation: reverseRotate 2.5s linear infinite;
    }
    /*æ—‹è½¬åŠ¨ç”»*/
    
    @-webkit-keyframes reverseRotate {
        0% {
            -webkit-transform: rotateZ(0deg);
        }
        100% {
            -webkit-transform: rotateZ(-360deg);
        }
    }
    
    .more {
        position: fixed;
        right: 3rem;
        bottom: 5rem;
        z-index: 10000;
        text-decoration: none;
        border-radius: 50%;
        width: 1.5rem;
        height: 1.5rem;
        display: inline-block;
        background-color: rgba(255, 0, 0, .3);
        color: #fff;
        font-size: .6rem;
        line-height: 1.5rem;
        text-align: center;
        border: 2px solid #fff;
    }
</style>

<body>
    <!-- æ›´å¤š -->
    <a class="more" href="http://mp.weixin.qq.com/s?__biz=MzAxNDI3NTc0NA==&mid=2247483809&idx=1&sn=8553a154a713c9868c66604b4e18448d&chksm=9b94846eace30d789d3dea0f6ceefca3d71bde644eb1625ab605c05f174c18274ebf2784ab1d#rd">æ›´å¤š</a>
    <!--éŸ³ä¹æŒ‰é’®-->
    <aside class="media-wrap">
        <!-- <span id="musicBtnTxt" style="display: none;">å…³é—­</span> -->
        <span id="musicBtn" class="music-btn"></span>
    </aside>
    <audio id="autoplay" src="media/1.mp3" autoplay="autoplay" loop="loop"></audio>
    <div class="main-content">
        <img src="img/blackboard.jpg" class="img-bg" alt="">
        <img src="img/up_half.jpg" class="response-img" id="redux" />
    </div>
    <div class="content">
        <div class="btn">ç‚¹å‡»æŸ¥çœ‹æç¤º</div>
        <div class="tips">åŠ¨åŠ¨æ‰‹æŒ‡ï¼ŒæŠ¹æ‰å…¬å¼çš„ä¸ŠåŠéƒ¨åˆ†è¯•è¯•</div>
    </div>
</body>
<script src='js/rem.js'></script>
<script src='js/jquery-2.0.3.min.js'></script>
<script src='js/jquery.eraser.js'></script>
<script>
    $(window).load(function() {
        //     è®¡ç®—å±å¹•çš„å®½åº¦
        var width = window.outerWidth;

        console.log('å±å¹•å®½åº¦' + width);
        //æ‘†æ”¾ magin-content,ä½¿æ–‡æœ¬å±…ä¸­
        if (width < 500) { //å¦‚æœå±å¹•å®½åº¦å°äº500
            $('.main-content').css({
                left: (width - 500) / 2
            })
        }

        //ç‚¹å‡»æŒ‰é’®æ·»åŠ äº‹ä»¶
        $('.btn').on('click', function() {
            $('.tips').css({
                display: 'block'
            })
        });
        // ç‚¹å‡»å£°éŸ³æŒ‰é’®çš„æ•ˆæœ
        var oMusicBtn = document.getElementById('musicBtn');
        var oMusic = document.getElementById('autoplay');
        oMusic.pause();
        //         var oMusicText = document.getElementById('musicBtnTxt');

        //ç‚¹å‡»æ’­æ”¾æŒ‰é’®
        oMusicBtn.onclick = function() {
            console.log(oMusic.paused);
            if (oMusic.paused) { //å¦‚æœæš‚åœï¼Œå°±æ’­æ”¾
                oMusic.play();
                //                 oMusicText.innerHTML = 'å¼€å§‹'; //æ›´æ”¹æ–‡å­—æç¤ºçš„å†…å®¹
                oMusicBtn.className = 'musicOn music-btn'; //æŒ‰é’®æ—‹è½¬
                //                 oMusicText.style.display = 'block';
            } else { //å¦‚æœæ’­æ”¾ï¼Œå°±æš‚åœ
                oMusic.pause();
                //                 oMusicText.innerHTML = 'å…³é—­'; //æ›´æ”¹æ–‡å­—æç¤ºçš„å†…å®¹
                oMusicBtn.className = 'music-btn'; //åœæ­¢æ—‹è½¬
                //                 oMusicText.style.display = 'block';
            }
            //        1såéšè—æç¤ºæ–‡å­—
            setTimeout(function() {
                oMusicText.style.display = 'none';
            }, 1000)

        }

        //è¿™ä¸ªé€‚ç”¨æ‰‹æœºç«¯ï¼Œç­‰å›¾ç‰‡åŠ è½½å®Œå†æ˜¾ç¤ºï¼Œå› ä¸ºæœ‰å¯èƒ½ä¼šå‡ºç°ç¬¬ä¸€æ¬¡åŠ è½½å›¾ç‰‡æ²¡æœ‰åŠ è½½å®Œå°±ä¸ä¼šå‡ºç°canvas
        $('#redux').eraser({
            size: 40, //è®¾ç½®æ©¡çš®æ“¦å¤§å°
            completeRatio: .6, //è®¾ç½®æ“¦é™¤é¢ç§¯æ¯”ä¾‹
            completeFunction: showResetButton, //å¤§äºæ“¦é™¤é¢ç§¯æ¯”ä¾‹è§¦å‘å‡½æ•°           
            progressFunction: function(p) { //æ“¦é™¤è¿‡ç¨‹ä¸­è§¦å‘å‡½æ•°
                // $('#progress').html(Math.round(p*100) + '%');
                console.log('the pic was erased ' + Math.round(p * 100) + '%');
            }
        });

        function showResetButton() {
            console.log('æ“¦é™¤å®Œæˆ');
            // æ’­æ”¾éŸ³ä¹
            oMusic.play();
            oMusicBtn.className = 'musicOn music-btn'; //æŒ‰é’®æ—‹è½¬
        }


    })
</script>

</html>